<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="../../public/css/normalize.css">
    <link rel="stylesheet" href="../../public/css/play.css">
</head>
<body>
<div class="wrap">
    <div class="title">
        <div class="group-icon"></div>
        <div class="user-name">小苹果大眼睛</div>
    </div>
    <div class="edition exec"></div>
    <!--<div class="edition go"></div>-->
    <div id="main">
        <div class="left-area">
            <div class="game-info">
                <div class="game-name exec1"></div>
                <div class="music-name third"></div>
            </div>
            <div>
                <div class="btn-freedom-exec"></div>
                <div class="btn-start-exec"></div>
            </div>
        </div>
        <div class="game-scene">
            <div class="play-line">
                <div class="line"></div>
            </div>
            <div class="mg-wrap">
                <div class="rhythm">
                    <div class="mg-row">
                        <div class="xiaogu"></div>
                    </div>
                    <div class="mg-row">
                        <div class="tanggu"></div>
                    </div>
                    <div class="mg-row">
                        <div class="daluo"></div>
                    </div>
                    <div class="mg-row">
                        <div class="dabo"></div>
                    </div>
                    <div class="mg-row">
                        <div class="xiaoluo"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="hit-area">
        <div class="grammar g-dabo">大钵</div>
        <div class="grammar g-daluo">大锣</div>
        <div class="grammar g-xiaoluo">小罗</div>
        <div class="grammar g-tanggu">堂鼓</div>
        <div class="grammar g-xiaogu">小鼓</div>
    </div>
</div>
<div class="waiting-wrap" style="display: block">
    <h2>等待其他小伙伴</h2>
    <div class="player-list">
        <div class="player">
            <div class="player-avatar wait"></div>
            <div class="player-name">小苹果大眼睛</div>
        </div>
        <div class="player">
            <div class="player-avatar avatar_2"></div>
            <div class="player-name">小苹果大眼睛</div>
        </div>
        <div class="player">
            <div class="player-avatar avatar_3"></div>
            <div class="player-name">小苹果大眼睛</div>
        </div>
        <div class="player">
            <div class="player-avatar avatar_4"></div>
            <div class="player-name">小苹果大眼睛</div>
        </div>
        <div class="player">
            <div class="player-avatar avatar_5"></div>
            <div class="player-name">小苹果大眼睛</div>
        </div>
    </div>
</div>
<div class="mask" style="display: block"></div>
<script src="../../public/js/jquery-1.11.1.min.js"></script>
<script>
    $(function() {
        var Reaygo = new Audio('../../public/audio/ready_go.mp3');
        var Tabour = new Audio('../../public/audio/Tabour.wav');
        var Bigbong = new Audio('../../public/audio/bigbong.wav');
        var Maluo = new Audio('../../public/audio/maluo.wav');
        var Dabo = new Audio('../../public/audio/dabo.wav');
        var Tanggu = new Audio('../../public/audio/tanggu.wav');

        $('.btn-start').on('click', function() {
            game.init();
        });

        $('.handler-area').on('click', '.operat-button', function() {
            var $this = $(this);
            var id = $this.attr('id');
            switch(id) {
                case 'tabour':
                    Tabour.play(); break;
                case 'bigbong':
                    Bigbong.play(); break;
                case 'maluo':
                    Maluo.play(); break;
                case 'dabo':
                    Dabo.play(); break;
                case 'tanggu':
                    Tanggu.play(); break;
                default:
            }
        });

        var game = {
            init: function() {
                this.$el = $('.jiezou-con');
                this.comp = {
                    $countdown: $('.countdown'),
                    $readyText: $('.ready-text')
                }
                this.showCountDown();
            },
            showCountDown: function() {
                var self = this;
                self.comp.$countdown.show();
                setTimeout(function() {
                    $('.ready-text').show();
                    Reaygo.play();
                    setTimeout(function() {
                        self.comp.$countdown.hide();
                        self.comp.$readyText.hide();
                        self.start();
                    }, 1200);
                }, 3000);
            },
            start: function() {
                var self = this;
                var w = this.$el.width();
                $('.btn-start').hide();
                this.$el.css('right', -w);
                this.$el.show().animate(
                        {right: w},
                        w * 10,
                        'linear',
                        function() {
                            self.end();
                        });
            },
            end: function() {
                console.log('end');
                $('.btn-start').show();
            },
            fixScore: function() {

            }
        }
    });
</script>
</body>
</html>
